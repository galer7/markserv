<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>{{title}}</title>
	<meta charset="utf-8">
	<link rel="stylesheet" href="{markserv}templates/markserv.css">
	<link rel="stylesheet" href="{markserv}templates/highlight-js-github-gist.css">
	<script type="text/javascript" id="MathJax-script" async
	      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
        </script>
</head>
<body>
<article class="markdown-body">
{{{content}}}
<footer><sup><hr> Served by <a href="https://www.npmjs.com/package/markserv">MarkServ</a> | PID: {{pid}}</sup></footer>
</article>

<!-- Mermaid diagram support -->
<script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
<script>
  mermaid.initialize({
    startOnLoad: false,
    theme: 'default',
    securityLevel: 'loose'
  });

  // Convert code blocks with language-mermaid to mermaid diagrams
  document.querySelectorAll('code.language-mermaid, code.hljs.language-mermaid').forEach(function(codeBlock, index) {
    var pre = codeBlock.parentElement;
    var container = document.createElement('div');
    container.className = 'mermaid';
    container.textContent = codeBlock.textContent;
    pre.parentNode.replaceChild(container, pre);
  });

  mermaid.run();
</script>
</body>
</html>
